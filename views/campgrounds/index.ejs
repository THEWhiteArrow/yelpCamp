<% layout('layouts/boilerplate')%>

<div id="load">
   <div id="animation">
      <div class="square" style="--i:0.5"></div>
      <div class="square" style="--i:1"></div>
      <div class="square" style="--i:2"></div>
   </div>
</div>
<div class="row d-flex justify-content-between">
   <h1 class="col-5" >All Campgrounds</h1>
   <a class="col-2 px-2 my-auto btn btn-success d-flex justify-content-center align-items-center" href="/campgrounds/new">Add Campground</a>
</div>
<div class="row grid-container">
<% for (let campground of campgrounds){%>
   <div class="card mb-3">
   <!-- <div class="card mb-3 d-flex flex-column flex-lg-row col-12 col-lg-4 "> -->
      <div class="row">
         <div class="col-md-12 ">
            <% if(campground.images.length){ %>
               <img class="img-fluid mt-2 pt-1" alt="" src="<%=campground.images[0].url%>">
               <% }else{ %>
                  <img class="img-fluid" alt=""
                     src="https://res.cloudinary.com/dcj6ujzqj/image/upload/v1610824866/YelpCamp/vprkkftxtsdsse9tnqyt.jpg ">
                  <% } %>
         </div>
         <div class="col-md-12">
            <div class="card-body d-flex flex-column justify-content-start ">
               <h5 class="card-title">
                  <%= campground.title %>
               </h5>
               <p class="card-text">
                  <%= campground.description %>
                     </p>
                     <p class="card-text">
                        <small class="text-muted">
                           <%= campground.location%>
                        </small>
               </p>
               <a class="btn btn-primary min-w-fit-content col-lg-5" href="/campgrounds/<%=campground._id%>">View <%=campground.title%></a>
            </div>
         </div>
      </div>
   </div>
   <% }%>
</div>
   <script>
      const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
      const campgrounds = { features:<%- JSON.stringify(campgrounds) %>};
   </script>
   <script src="/javascripts/clusterMap.js"></script>